// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client"
  output        = "../src/generated/client"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String   // In a real app, this should be hashed. For Phase 1 prototype, we'll store as is or simple hash.
  createdAt DateTime @default(now())
  
  player    Player?
}

model Player {
  id        Int      @id @default(autoincrement())
  userId    Int      @unique
  user      User     @relation(fields: [userId], references: [id])
  
  x         Float    @default(0)
  y         Float    @default(0)
  
  skin      String   @default("player_idle") // e.g. "player_red", "player_blue"
  house     String   @default("ignis") // "ignis", "axiom", "vesper"
  prestige  Int      @default(0)

  // Future proofing for Phase 2
  health    Int      @default(100)
  maxHealth Int      @default(100)

  inventory InventoryItem[]
}

model InventoryItem {
  id        Int    @id @default(autoincrement())
  playerId  Int
  player    Player @relation(fields: [playerId], references: [id])
  
  itemId    String // e.g. "sword_wood", "potion_hp"
  count     Int    @default(1)
  
  equipped  Boolean @default(false) // Is this item currently equipped?
}